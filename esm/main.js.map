{"version":3,"file":"main.js","sources":["../src/fetching/useQuery.ts","../src/fetching/useMutation.ts"],"sourcesContent":["import {onMounted, Ref, ref, watch} from 'vue';\r\n\r\nexport const useQuery = <T>(queryFn: () => Promise<T>, deps?: Ref[]|Ref) => {\r\n    const isLoading = ref(false);\r\n    const data = ref<T>();\r\n    const error = ref('');\r\n    const fetchData = async () => {\r\n        try {\r\n            isLoading.value = true;\r\n            data.value = await queryFn();\r\n        } catch (e: any) {\r\n            error.value = e\r\n        } finally {\r\n            isLoading.value = false;\r\n        }\r\n    }\r\n    onMounted(()=>{\r\n        fetchData()\r\n    })\r\n    watch(()=>deps, ()=>{\r\n        fetchData()\r\n    }, {deep: true})\r\n    return {\r\n        isLoading, data, error, fetchData\r\n    };\r\n}\r\n\r\n","import {ref} from 'vue';\r\nimport {mutateOptions} from \"@/fetching/mutateOptions.type\";\r\n\r\nexport const useMutation = <T>(mutateFn: (...props : unknown[]) => Promise<T>, options?: mutateOptions) => {\r\n    const isLoading = ref(false);\r\n    const data = ref<T>();\r\n    const error = ref('');\r\n    const mutate = async (...props : unknown[]) => {\r\n        try {\r\n            isLoading.value = true;\r\n            if (options?.onSettled)\r\n                options.onSettled()\r\n            const response = await mutateFn(...props);\r\n            data.value = response;\r\n            if (options?.onSuccess)\r\n                options.onSuccess(response)\r\n        } catch (e: any) {\r\n            error.value = e\r\n            if (options?.onError)\r\n                options.onError(e)\r\n        } finally {\r\n            isLoading.value = false;\r\n        }\r\n    }\r\n    return {\r\n        isLoading, error, data, mutate\r\n    };\r\n}\r\n\r\n"],"names":[],"mappings":";;MAEa,QAAQ,GAAG,CAAI,OAAyB,EAAE,IAAgB,KAAI;AACvE,IAAA,MAAM,SAAS,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;AAC7B,IAAA,MAAM,IAAI,GAAG,GAAG,EAAK,CAAC;AACtB,IAAA,MAAM,KAAK,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC;AACtB,IAAA,MAAM,SAAS,GAAG,YAAW;QACzB,IAAI;AACA,YAAA,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;AACvB,YAAA,IAAI,CAAC,KAAK,GAAG,MAAM,OAAO,EAAE,CAAC;AAChC,SAAA;AAAC,QAAA,OAAO,CAAM,EAAE;AACb,YAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA;AAClB,SAAA;AAAS,gBAAA;AACN,YAAA,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;AAC3B,SAAA;AACL,KAAC,CAAA;IACD,SAAS,CAAC,MAAI;AACV,QAAA,SAAS,EAAE,CAAA;AACf,KAAC,CAAC,CAAA;AACF,IAAA,KAAK,CAAC,MAAI,IAAI,EAAE,MAAI;AAChB,QAAA,SAAS,EAAE,CAAA;AACf,KAAC,EAAE,EAAC,IAAI,EAAE,IAAI,EAAC,CAAC,CAAA;IAChB,OAAO;AACH,QAAA,SAAS,EAAE,IAAI,EAAE,KAAK,EAAE,SAAS;KACpC,CAAC;AACN;;MCtBa,WAAW,GAAG,CAAI,QAA8C,EAAE,OAAuB,KAAI;AACtG,IAAA,MAAM,SAAS,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;AAC7B,IAAA,MAAM,IAAI,GAAG,GAAG,EAAK,CAAC;AACtB,IAAA,MAAM,KAAK,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC;AACtB,IAAA,MAAM,MAAM,GAAG,OAAO,GAAG,KAAiB,KAAI;QAC1C,IAAI;AACA,YAAA,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;YACvB,IAAI,OAAO,EAAE,SAAS;gBAClB,OAAO,CAAC,SAAS,EAAE,CAAA;YACvB,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,GAAG,KAAK,CAAC,CAAC;AAC1C,YAAA,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;YACtB,IAAI,OAAO,EAAE,SAAS;AAClB,gBAAA,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAA;AAClC,SAAA;AAAC,QAAA,OAAO,CAAM,EAAE;AACb,YAAA,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA;YACf,IAAI,OAAO,EAAE,OAAO;AAChB,gBAAA,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;AACzB,SAAA;AAAS,gBAAA;AACN,YAAA,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;AAC3B,SAAA;AACL,KAAC,CAAA;IACD,OAAO;AACH,QAAA,SAAS,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM;KACjC,CAAC;AACN;;;;"}